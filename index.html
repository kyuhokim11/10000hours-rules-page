<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>1만시간의 법칙</title>
        <link rel="stylesheet" href="./css/style.css"/>
    </head>
    <body>
        <header class="site-header">
            <img
                class="site-header__logo"
                src="./assets/icons/icon-title.svg"
                alt="1만시간의 법칙"/>
            <q class="site-header__slogan">"연습은 어제의 당신보다 당신을 더 낫게 만든다."</q>
        </header>

        <main class="main-content">
            <section class="quote-section">
                <div class="quote">
                    <img
                        src="./assets/icons/icon-quote-left.svg"
                        alt="왼쪽 따옴표 아이콘"
                        class="quote__icon"/>
                    <blockquote class="quote__text">
                        <p>
                            <strong class="quote__text_strong">1만 시간의 법칙</strong>은</p>
                        <p>어떤 분야의 전문가가 되기 위해서는</p>
                        <p>최소한 1만 시간의 훈련이 필요하다는 법칙이다.</p>
                    </blockquote>
                    <img
                        src="./assets/icons/icon-quote-right.svg"
                        alt="오른쪽 따옴표 아이콘"
                        class="quote__icon"/>
                </div>
            </section>

            <section class="input-section">
                <form class="goal-form">
                    <p>
                        나는
                        <label class="sr-only" for="field">분야</label>
                        <input
                            id="field"
                            name="field"
                            type="text"
                            class="goal-form__input"
                            placeholder="예) 프로그래밍"
                            required="required">
                        전문가가 될 것이다
                    </p>
                    <p>
                        그래서 앞으로 매일 하루에
                        <label class="sr-only" for="time">하루 학습 시간</label>
                        <input
                            id="time"
                            name="time"
                            type="number"
                            class="goal-form__input"
                            placeholder="예) 5"
                            inputmode="numeric"
                            min="1"
                            max="24"
                            step="1"
                            required="required"
                            aria-describedby="time-unit">
                        <span id="time-unit" class="sr-only">시간</span>
                        시간씩 훈련할 것이다
                    </p>
                </form>
            </section>

            <section class="calculate-section">
  <button class="calculate-button" type="button" data-open-modal>
    나는 며칠 동안 훈련을 해야 1만 시간이 될까?
  </button>           <img
                    src="./assets/icons/icon-touch.svg"
                    alt="손가락 아이콘"
                    class="calculate-section__icon"/>
            </section>

<section class="result-section" aria-live="polite">
  <p>당신은 <strong class="result-section__field"><output id="fieldOut">프로그래밍</output></strong> 전문가가 되기 위해서</p>
  <p class="result-section__highlight">대략 <strong class="result-section__days"><output id="daysOut">5110</output></strong> 일 이상 훈련하셔야 합니다! :)</p>
</section>

            <section class="action-section">
<button class="action-button action-button--primary" type="button">훈련하러 가기 GO! GO!</button>
<button class="action-button action-button--share" type="button">공유하기</button>
            </section>
        </main>

        <footer class="site-footer">
            <img src="./assets/icons/icon-logo.svg" alt="위니브 로고"/>
            <p>본 서비스 내 이미지 및 콘텐츠의 저작권은 주식회사 위니브에 있습니다.
            </p>
            <p>
                수정 및 재배포, 무단 도용 시 법적인 문제가 발생할 수 있습니다.</p>
        </footer>
        <!-- 오버레이 모달 -->
        <div class="overlay" id="overlay">
            <div
                class="modal"
                role="dialog"
                aria-modal="true"
                aria-labelledby="modal-title">
                <header class="modal_header">
                    <h2 id="modal-title">화이팅!!</h2>
                    <p>당신의 꿈을 응원합니다!</p>
                </header>

                <div class="modal_body">
                    <img class="modal_img" src="./assets/images/licat.png" alt="모달 내부 라이캣 이미지"/>
                </div>

                <footer class="modal_footer">
                    <button class="modal_button" id="cancel-modal">종료하고 진짜 훈련하러 가기 GO!GO!</button>
                </footer>
            </div>
        </div>
        <script>
  (function () {
    const overlay = document.getElementById('overlay');
    const openers = document.querySelectorAll('[data-open-modal]'); // 열기 트리거(여러 개도 OK)
    const closeBtn = document.getElementById('cancel-modal');
    const modal = overlay?.querySelector('.modal');

    if (!overlay || !modal) return;

    // 포커스 되돌리기 위해 마지막 포커스 저장
    let lastFocused = null;

    function lockScroll(lock) {
      document.documentElement.style.overflow = lock ? 'hidden' : '';
      document.body.style.overflow = lock ? 'hidden' : '';
    }

    function openModal() {
      lastFocused = document.activeElement;
      overlay.classList.add('is-open');
      lockScroll(true);
      // 모달 안 첫 번째 포커스 가능한 요소로 포커스 이동(없으면 모달 자체)
      const focusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      (focusable || modal).focus({ preventScroll: true });
    }

    function closeModal() {
      overlay.classList.remove('is-open');
      lockScroll(false);
      if (lastFocused && typeof lastFocused.focus === 'function') {
        lastFocused.focus({ preventScroll: true });
      }
    }

    // 열기 버튼들
    openers.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        openModal();
      });
    });

    // 닫기 버튼
    closeBtn?.addEventListener('click', () => closeModal());

    // 오버레이 바깥 클릭으로 닫기
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) closeModal();
    });


    // 접근성 보완: 모달에 포커스 가능하도록
    modal.setAttribute('tabindex', '-1');
  })();
</script>
    </body>
</html>